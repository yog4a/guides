# =====================================================================
# UFW: Whitelist Localhost for NATS
# Ensures localhost traffic is never blocked by UFW
# Add these rules to /etc/ufw/before.rules after the comment block
# =====================================================================

# Allow all traffic on loopback interface (IPv4)
-A ufw-before-input -i lo -j ACCEPT
-A ufw-before-output -o lo -j ACCEPT

# Allow all traffic from 127.0.0.0/8 (entire localhost range)
-A ufw-before-input -s 127.0.0.0/8 -j ACCEPT
-A ufw-before-output -d 127.0.0.0/8 -j ACCEPT

# Allow localhost traffic (IPv6)
-A ufw6-before-input -i lo -j ACCEPT
-A ufw6-before-output -o lo -j ACCEPT
-A ufw6-before-input -s ::1 -j ACCEPT
-A ufw6-before-output -d ::1 -j ACCEPT

# Note: These rules ensure Docker containers can communicate with
# NATS running on the host without being blocked

