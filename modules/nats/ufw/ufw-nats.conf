# =====================================================================
# UFW Rules for NATS JetStream Cluster
# Add these rules to allow NATS ports through the firewall
# =====================================================================

# NATS Client Port (primary node)
sudo ufw allow 4222/tcp comment 'NATS Client Port'

# NATS HTTP Monitoring Port (primary node)
# WARNING: Consider restricting to specific IPs in production
sudo ufw allow 8222/tcp comment 'NATS HTTP Monitoring'

# Additional NATS nodes (if exposing externally)
# Uncomment if you need external access to other nodes:
# sudo ufw allow 4223/tcp comment 'NATS Client Port (node 2)'
# sudo ufw allow 8223/tcp comment 'NATS HTTP Monitoring (node 2)'
# sudo ufw allow 4224/tcp comment 'NATS Client Port (node 3)'
# sudo ufw allow 8224/tcp comment 'NATS HTTP Monitoring (node 3)'

# NATS Cluster Port (6222)
# NOTE: Only needed if nodes are on different machines
# For single-machine setup, this is NOT required
# sudo ufw allow 6222/tcp comment 'NATS Cluster Port'

# Reload UFW to apply changes
sudo ufw reload

# Verify rules
sudo ufw status

